<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title><%= paper.title %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="container py-4">
  <h1 class="mb-3"><%= paper.title %></h1>
  <p class="text-muted">著者: <%= paper.authors.join(', ') %> (<%= paper.year %>)</p>

  <h2>PICO</h2>
  <ul>
    <li>P: <%= paper.pico.population %></li>
    <li>I: <%= paper.pico.intervention %></li>
    <li>C: <%= paper.pico.comparison %></li>
    <li>O: <%= paper.pico.outcome %></li>
  </ul>

  <p><strong>組み入れ基準:</strong> <%= paper.inclusion %></p>
  <p><strong>除外基準:</strong> <%= paper.exclusion %></p>

  <h2>結果</h2>
  <p><%= paper.results %></p>
  <canvas id="resultChart"></canvas>

  <h2>考察</h2>
  <p><%= paper.discussion %></p>

  <h2>批判的吟味</h2>
  <p><%= paper.critique %></p>

  <p>タグ: <%= paper.tags.join(', ') %></p>

  <p><a href="/" class="btn btn-secondary mt-3">一覧へ戻る</a></p>

  <script>
    const ctx = document.getElementById('resultChart').getContext('2d');
    const data = {
      labels: <%- JSON.stringify(paper.graph.labels) %>,
      datasets: [{
        label: 'アウトカム',
        data: <%- JSON.stringify(paper.graph.values) %>,
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        borderColor: 'rgba(75, 192, 192, 1)',
        borderWidth: 1
      }]
    };
    new Chart(ctx, { type: 'bar', data: data, options: { responsive: true }});
  </script>
</body>
</html>
